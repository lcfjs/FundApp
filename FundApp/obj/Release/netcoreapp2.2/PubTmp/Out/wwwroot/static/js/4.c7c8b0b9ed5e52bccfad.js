webpackJsonp([4],{"3zuw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("X2Oc"),l=a("vLgD"),i={name:"dayChart",data:function(){return{fullscreenLoading:!1,dailyChart:null,accumulativeChart:null,dateRanges:"",fundCode:"257070",addCode:"",tableData:[],activeName:"chart",fundCodes:[],pageIndex:n.b,pageSize:n.c,total:0,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},mounted:function(){this.dailyChart=this.$echarts.init(document.getElementById("dailyChart"));var e=document.getElementById("accumulativeChart");e.style.width=document.getElementById("dailyChart").offsetWidth+"px",this.accumulativeChart=this.$echarts.init(e),this.getFundCodes()},methods:{insert:function(){var e=this;e.fullscreenLoading=!0,Object(l.a)({url:"/Home/AddGather",params:{code:e.addCode}}).then(function(t){e.fullscreenLoading=!1,t&&e.$message({message:t.msg,type:"warning"})})},dateFormat:function(e){return Object(n.a)(e)},refreshData:function(e){this.fullscreenLoading=!0,this.getTableData(this.fundCode),this.getChartData(this.fundCode)},getFundCodes:function(){var e=this;Object(l.a)({url:"/Home/GetGatherList",params:null}).then(function(t){t&&(t.data.forEach(function(e){e.name=e.name+"("+e.code+")"}),e.fundCodes=t.data,e.refreshData())})},getTableData:function(){var e=this;Object(l.a)({url:"/Home/GetDayTableData",params:{fundCode:e.fundCode,pageIndex:e.pageIndex-1,pageSize:e.pageSize}}).then(function(t){var a=t.data;a&&(e.tableData=a.data,e.total=a.total)})},getChartData:function(){var e=this,t=null,a=null;this.dateRanges&&(t=Object(n.a)(new Date(this.dateRanges[0]),"yyyy-MM-dd"),a=Object(n.a)(new Date(this.dateRanges[1]),"yyyy-MM-dd")),Object(l.a)({url:"/Home/GetDayChartData",methods:"get",params:{fundCode:this.fundCode,date1:t,date2:a}}).then(function(t){e.fullscreenLoading=!1;var a=t.data;if(a){var l={tooltip:{trigger:"axis",position:function(e){return[e[0],"10%"]},formatter:function(e){return e[0].seriesName+"<br/>"+Object(n.a)(new Date(e[0].axisValue),"yyyy-MM-dd")+"<br/>"+e[0].value+"%"}},title:{left:"center",text:e.fundCode},xAxis:{type:"category",boundaryGap:!1,axisLabel:{formatter:function(e){return Object(n.a)(new Date(e),"yyyy-MM-dd")}},data:a.x},yAxis:{type:"value"},series:[{name:"每日净值增长率",type:"bar",barWidth:20,showSymbol:!1,itemStyle:{normal:{color:function(e){return e.value>0?"#F56C6C":"#67C23A"},label:{show:!0,position:"top"}}},data:a.y}]};e.dailyChart.setOption(l);var i={tooltip:{trigger:"axis",position:function(e){return[e[0],"10%"]},formatter:function(e){return e[0].seriesName+"<br/>"+Object(n.a)(new Date(e[0].axisValue),"yyyy-MM-dd")+"<br/>"+e[0].value+"%"}},title:{left:"center",text:e.fundCode},xAxis:{type:"category",boundaryGap:!1,axisLabel:{formatter:function(e){return Object(n.a)(new Date(e),"yyyy-MM-dd")}},data:a.x},yAxis:{type:"value"},series:[{name:"累计净值增长率",type:"line",showSymbol:!1,itemStyle:{color:"rgb(255, 70, 131)"},data:a.y2}]};e.accumulativeChart.setOption(i)}}).catch(function(t){e.fullscreenLoading=!1,console.log(t)})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"拼命加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-row",[a("el-row",{staticStyle:{margin:"10px 5px"}},[a("el-col",{staticClass:"col1",attrs:{span:6}},[a("el-select",{staticStyle:{width:"310px"},attrs:{placeholder:"请选择"},on:{change:e.refreshData},model:{value:e.fundCode,callback:function(t){e.fundCode=t},expression:"fundCode"}},e._l(e.fundCodes,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),a("el-col",{staticClass:"col1",attrs:{span:6}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","picker-options":e.pickerOptions},on:{change:e.refreshData},model:{value:e.dateRanges,callback:function(t){e.dateRanges=t},expression:"dateRanges"}})],1)]),e._v(" "),a("el-col",{staticClass:"col1",attrs:{span:12}},[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入代码"},model:{value:e.addCode,callback:function(t){e.addCode=t},expression:"addCode"}}),e._v(" "),a("el-button",{on:{click:e.insert}},[e._v("添加采集")])],1)],1),e._v(" "),a("el-row",[a("el-tabs",{on:{"tab-click":function(e){}},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"每日收益图表",name:"chart"}},[a("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:"dailyChart"}})]),e._v(" "),a("el-tab-pane",{attrs:{label:"累计收益图表",name:"accumulativeChart"}},[a("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:"accumulativeChart"}})]),e._v(" "),a("el-tab-pane",{attrs:{label:"数据列表",name:"table"}},[a("el-container",[a("el-main",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"jzrq",label:"日期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                        "+e._s(e.dateFormat(new Date(t.row.jzrq),"yyyy-MM-dd"))+"\n                                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"jz",label:"净值",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ljjz",label:"累计净值",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"jzzzl",label:"净值增长率"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                        "+e._s(t.row.jzzzl)+"%\n                                    ")]}}])})],1)],1),e._v(" "),a("el-footer",[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"current-page":e.pageIndex,"page-size":e.pageSize},on:{"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.getTableData,"current-change":e.getTableData}})],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,r,!1,function(e){a("L2m7")},"data-v-36643532",null);t.default=o.exports},L2m7:function(e,t){}});
//# sourceMappingURL=4.c7c8b0b9ed5e52bccfad.js.map